#!/usr/bin/env bash

set -e

if output="$(git status --porcelain)" && [ -n "$output" ]; then
    echo "Git is not clean. Commit your changes first."
    exit 1
fi


VERSION=$(npm version $1)
npm run build
git push && git push --tags

npm pack && npm publish --registry https://registry.npmjs.org/ --access public && rm -f *.tgz

echo "ðŸš€ @stacktrace/inertia $VERSION released!"
